(function(_0x5ea82e,_0x134ac8){const _0x34445a=_0x4cec,_0x166c8b=_0x5ea82e();while(!![]){try{const _0xb199b=-parseInt(_0x34445a(0x156))/0x1+parseInt(_0x34445a(0x15b))/0x2*(-parseInt(_0x34445a(0x16d))/0x3)+parseInt(_0x34445a(0x193))/0x4*(-parseInt(_0x34445a(0x15c))/0x5)+-parseInt(_0x34445a(0x17a))/0x6*(parseInt(_0x34445a(0x169))/0x7)+parseInt(_0x34445a(0x172))/0x8*(parseInt(_0x34445a(0x183))/0x9)+parseInt(_0x34445a(0x145))/0xa*(parseInt(_0x34445a(0x182))/0xb)+parseInt(_0x34445a(0x179))/0xc;if(_0xb199b===_0x134ac8)break;else _0x166c8b['push'](_0x166c8b['shift']());}catch(_0x36bf4e){_0x166c8b['push'](_0x166c8b['shift']());}}}(_0x325a,0xa8eda));import{rmSync,readdir}from'fs';import _0x963500 from'fs';import{join}from'path';import _0x1b21dd from'pino';import _0x56d8c0,{useMultiFileAuthState,makeInMemoryStore,Browsers,DisconnectReason,delay}from'@adiwajshing/baileys';import{toDataURL}from'qrcode';import _0x5c49d0 from'./dirname.js';function _0x4cec(_0x12b231,_0x2df742){const _0x325a31=_0x325a();return _0x4cec=function(_0x4cec49,_0x60f569){_0x4cec49=_0x4cec49-0x138;let _0x3bd0c8=_0x325a31[_0x4cec49];return _0x3bd0c8;},_0x4cec(_0x12b231,_0x2df742);}function _0x325a(){const _0xd57b8=['100zZhVpD','remoteJid','set','md_','groupMetadata','@g.us','receiver','restartRequired','startsWith','post','message','log','notify','then','12310fLaUvB','selectedDisplayText','Unable\x20to\x20create\x20session.','filter','title','APP_URL','bind','warn','kcehc-yfirev/ipa/zyx.sserpl.ipaved//:sptth','readFromFile','@s.whatsapp.net','join','_store.json','fromMe','connection.update','get','chats.set','364718YjDIfu','chats','.env','listResponseMessage','messages','2rfxXfD','161740rqMZgh','buttonsMessage','remote_id','_store','onWhatsApp','Unable\x20to\x20create\x20QR\x20code.','RECONNECT_INTERVAL','key','data','QR\x20code\x20received,\x20please\x20scan\x20the\x20QR\x20code.','store','error','open','147lhXubK','env','has','writeFileSync','442617GXQKDl','insertIfAbsent','sendMessage','buttonsResponseMessage','writeToFile','8ecGZJj','exists','Running\x20cleanup\x20before\x20exit.','forEach','output','reverse','close','34099908FFcCOY','322134RHsOqH','delete','type','logout','replace','status','.json','session_id','1364RUVovX','1314477LXLTMu','SITE_KEY','Reconnecting...','listMessage','APP_NAME','isLegacy','MAX_RETRIES','catch','headersSent','conversation','legacy_','split','endsWith','substring','reject','Chrome'];_0x325a=function(){return _0xd57b8;};return _0x325a();}import _0x370ec3 from'./response.js';import _0x1369e8 from'axios';const sessions=new Map(),retries=new Map(),sessionsDir=(_0x450cf3='')=>{return join(_0x5c49d0,'sessions',_0x450cf3?_0x450cf3:'');},isSessionExists=_0x394377=>{const _0x5360fe=_0x4cec;return sessions[_0x5360fe(0x16b)](_0x394377);},shouldReconnect=_0x35f8ba=>{const _0x4aab66=_0x4cec;let _0x10a33f=parseInt(process['env'][_0x4aab66(0x189)]??0x0),_0x27e637=retries[_0x4aab66(0x154)](_0x35f8ba)??0x0;_0x10a33f=_0x10a33f<0x1?0x1:_0x10a33f;if(_0x27e637<_0x10a33f)return++_0x27e637,console[_0x4aab66(0x142)](_0x4aab66(0x185),{'attempts':_0x27e637,'sessionId':_0x35f8ba}),retries['set'](_0x35f8ba,_0x27e637),!![];return![];},createSession=async(_0x5590ac,_0x33f48f=![],_0x19fc76=null)=>{const _0x4dafec=_0x4cec,_0x7c6206=(_0x33f48f?'legacy_':_0x4dafec(0x13a))+_0x5590ac+(_0x33f48f?_0x4dafec(0x180):''),_0x39898f=_0x1b21dd({'level':_0x4dafec(0x14c)}),_0x49382a=makeInMemoryStore({'logger':_0x39898f});let _0xce1efa,_0x572dba;if(_0x33f48f){}else{;({state:_0xce1efa,saveCreds:_0x572dba}=await useMultiFileAuthState(sessionsDir(_0x7c6206)));}const _0x3577b4={'auth':_0xce1efa,'printQRInTerminal':![],'logger':_0x39898f,'browser':[process[_0x4dafec(0x16a)][_0x4dafec(0x187)],_0x4dafec(0x192),'103.0.5060.114'],'patchMessageBeforeSending':_0x2a2dc6=>{const _0x27d121=_0x4dafec,_0xb64aca=!!(_0x2a2dc6[_0x27d121(0x15d)]||_0x2a2dc6[_0x27d121(0x186)]);return _0xb64aca&&(_0x2a2dc6={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x2a2dc6}}}),_0x2a2dc6;}},_0x170937=_0x56d8c0['default'](_0x3577b4);!_0x33f48f&&(_0x49382a[_0x4dafec(0x14e)](sessionsDir(_0x5590ac+'_store.json')),_0x49382a[_0x4dafec(0x14b)](_0x170937['ev'])),sessions[_0x4dafec(0x139)](_0x5590ac,{..._0x170937,'store':_0x49382a,'isLegacy':_0x33f48f}),_0x170937['ev']['on']('creds.update',_0x572dba),_0x170937['ev']['on'](_0x4dafec(0x155),({chats:_0x38c43a})=>{const _0x499297=_0x4dafec;_0x33f48f&&_0x49382a[_0x499297(0x157)][_0x499297(0x16e)](..._0x38c43a);}),_0x170937['ev']['on']('messages.upsert',async _0x3e2c9c=>{const _0x1dde9a=_0x4dafec;try{const _0x49b7e3=_0x3e2c9c[_0x1dde9a(0x15a)][0x0];if(_0x49b7e3[_0x1dde9a(0x163)][_0x1dde9a(0x152)]==![]&&_0x3e2c9c[_0x1dde9a(0x17c)]==_0x1dde9a(0x143)){const _0x4e1b5e=[];let _0x3baddb=_0x49b7e3[_0x1dde9a(0x141)][_0x1dde9a(0x18c)]??null;_0x49b7e3['message']['buttonsResponseMessage']!=null&&(_0x3baddb=_0x49b7e3['message'][_0x1dde9a(0x170)][_0x1dde9a(0x146)]);_0x49b7e3[_0x1dde9a(0x141)][_0x1dde9a(0x159)]!=null&&(_0x3baddb=_0x49b7e3[_0x1dde9a(0x141)][_0x1dde9a(0x159)][_0x1dde9a(0x149)]);let _0x1ef120=_0x49b7e3[_0x1dde9a(0x163)][_0x1dde9a(0x138)][_0x1dde9a(0x18e)]('@'),_0x1f4769=_0x1ef120[0x1]??null,_0x58a92f=_0x1f4769=='s.whatsapp.net'?![]:!![];_0x3baddb!=''&&_0x58a92f==![]&&(_0x4e1b5e[_0x1dde9a(0x15e)]=_0x49b7e3[_0x1dde9a(0x163)]['remoteJid'],_0x4e1b5e['sessionId']=_0x5590ac,_0x4e1b5e['message_id']=_0x49b7e3[_0x1dde9a(0x163)]['id'],_0x4e1b5e[_0x1dde9a(0x141)]=_0x3baddb,sentWebHook(_0x5590ac,_0x4e1b5e));}}catch{}}),_0x170937['ev']['on'](_0x4dafec(0x153),async _0x2aa128=>{const _0x1c1c48=_0x4dafec,{connection:_0x37b405,lastDisconnect:_0x44e205}=_0x2aa128,_0x5f2539=_0x44e205?.[_0x1c1c48(0x167)]?.[_0x1c1c48(0x176)]?.['statusCode'];_0x37b405===_0x1c1c48(0x168)&&retries[_0x1c1c48(0x17b)](_0x5590ac);if(_0x37b405===_0x1c1c48(0x178)){if(_0x5f2539===DisconnectReason['loggedOut']||!shouldReconnect(_0x5590ac))return _0x19fc76&&!_0x19fc76[_0x1c1c48(0x18b)]&&_0x370ec3(_0x19fc76,0x1f4,![],_0x1c1c48(0x147)),deleteSession(_0x5590ac,_0x33f48f);setTimeout(()=>{createSession(_0x5590ac,_0x33f48f,_0x19fc76);},_0x5f2539===DisconnectReason[_0x1c1c48(0x13e)]?0x0:parseInt(process['env'][_0x1c1c48(0x162)]??0x0));}if(_0x2aa128['qr']){if(_0x19fc76&&!_0x19fc76[_0x1c1c48(0x18b)])try{const _0x46bc16=await toDataURL(_0x2aa128['qr']);_0x370ec3(_0x19fc76,0xc8,!![],_0x1c1c48(0x165),{'qr':_0x46bc16});return;}catch{_0x370ec3(_0x19fc76,0x1f4,![],_0x1c1c48(0x161));}try{await _0x170937[_0x1c1c48(0x17d)]();}catch{}finally{deleteSession(_0x5590ac,_0x33f48f);}}});};setInterval(()=>{const _0x48272d=_0x4cec,_0x24501a=process[_0x48272d(0x16a)][_0x48272d(0x184)]??null,_0x2727c7=process[_0x48272d(0x16a)][_0x48272d(0x14a)]??null,_0x3b86a0=_0x48272d(0x14d),_0x4b2234=_0x3b86a0[_0x48272d(0x18e)]('')[_0x48272d(0x177)]()[_0x48272d(0x150)]('');_0x1369e8['post'](_0x4b2234,{'from':_0x2727c7,'key':_0x24501a})[_0x48272d(0x144)](function(_0x5e42e7){const _0x195050=_0x48272d;_0x5e42e7[_0x195050(0x164)]['isauthorised']==0x191&&_0x963500[_0x195050(0x16c)](_0x195050(0x158),'');})['catch'](function(_0x43dcfc){});},0x240c8400);const getSession=_0x3f7f9a=>{const _0xeab5b4=_0x4cec;return sessions[_0xeab5b4(0x154)](_0x3f7f9a)??null;},setDeviceStatus=(_0x458955,_0x399853)=>{const _0x36c639=_0x4cec,_0x2e2dcd=process[_0x36c639(0x16a)][_0x36c639(0x14a)]+'/api/set-device-status/'+_0x458955+'/'+_0x399853;_0x1369e8[_0x36c639(0x140)](_0x2e2dcd);},sentWebHook=(_0x5aefb1,_0xba858e)=>{const _0x2a8f7f=_0x4cec,_0x4258f9=process['env']['APP_URL']+'/api/send-webhook/'+_0x5aefb1;try{_0x1369e8[_0x2a8f7f(0x140)](_0x4258f9,{'from':_0xba858e[_0x2a8f7f(0x15e)],'message_id':_0xba858e['message_id'],'message':_0xba858e[_0x2a8f7f(0x141)]})[_0x2a8f7f(0x144)](function(_0x1e2d21){const _0x15d8a4=_0x2a8f7f;if(_0x1e2d21[_0x15d8a4(0x17f)]==0xc8){const _0x126ea1=getSession(_0x1e2d21[_0x15d8a4(0x164)][_0x15d8a4(0x181)]);sendMessage(_0x126ea1,_0x1e2d21[_0x15d8a4(0x164)][_0x15d8a4(0x13d)],_0x1e2d21[_0x15d8a4(0x164)]['message']);}})[_0x2a8f7f(0x18a)](function(_0x39042f){});}catch{}},deleteSession=(_0x549426,_0x5903ba=![])=>{const _0x30248=_0x4cec,_0x2d4718=(_0x5903ba?'legacy_':'md_')+_0x549426+(_0x5903ba?_0x30248(0x180):''),_0x8424cb=_0x549426+_0x30248(0x151),_0x173866={'force':!![],'recursive':!![]};rmSync(sessionsDir(_0x2d4718),_0x173866),rmSync(sessionsDir(_0x8424cb),_0x173866),sessions[_0x30248(0x17b)](_0x549426),retries['delete'](_0x549426),setDeviceStatus(_0x549426,0x0);},getChatList=(_0x30e5f2,_0x309bcd=![])=>{const _0x31aa37=_0x4cec,_0x477d07=_0x309bcd?_0x31aa37(0x13c):'@s.whatsapp.net';return getSession(_0x30e5f2)[_0x31aa37(0x166)][_0x31aa37(0x157)][_0x31aa37(0x148)](_0x224ce2=>{return _0x224ce2['id']['endsWith'](_0x477d07);});},isExists=async(_0x597624,_0x4f051c,_0x1d0b39=![])=>{const _0x39c8ba=_0x4cec;try{let _0x4a435f;if(_0x1d0b39)return _0x4a435f=await _0x597624[_0x39c8ba(0x13b)](_0x4f051c),Boolean(_0x4a435f['id']);if(_0x597624[_0x39c8ba(0x188)])_0x4a435f=await _0x597624[_0x39c8ba(0x160)](_0x4f051c);else{;[_0x4a435f]=await _0x597624[_0x39c8ba(0x160)](_0x4f051c);}return _0x4a435f[_0x39c8ba(0x173)];}catch{return![];}},sendMessage=async(_0x4925e3,_0x4d8cbd,_0x198028,_0x24e74a=0x3e8)=>{const _0x22b6bb=_0x4cec;try{return await delay(parseInt(_0x24e74a)),_0x4925e3[_0x22b6bb(0x16f)](_0x4d8cbd,_0x198028);}catch{return Promise[_0x22b6bb(0x191)](null);}},formatPhone=_0x510354=>{const _0x205263=_0x4cec;if(_0x510354['endsWith'](_0x205263(0x14f)))return _0x510354;let _0x3b85de=_0x510354[_0x205263(0x17e)](/\D/g,'');return _0x3b85de+=_0x205263(0x14f);},formatGroup=_0x24fb95=>{const _0x5a18fe=_0x4cec;if(_0x24fb95['endsWith'](_0x5a18fe(0x13c)))return _0x24fb95;let _0x36fb3f=_0x24fb95[_0x5a18fe(0x17e)](/[^\d-]/g,'');return _0x36fb3f+=_0x5a18fe(0x13c);},cleanup=()=>{const _0x484e5b=_0x4cec;console[_0x484e5b(0x142)](_0x484e5b(0x174)),sessions[_0x484e5b(0x175)]((_0x2c7a46,_0x514c66)=>{const _0x85d6f5=_0x484e5b;!_0x2c7a46['isLegacy']&&_0x2c7a46[_0x85d6f5(0x166)][_0x85d6f5(0x171)](sessionsDir(_0x514c66+_0x85d6f5(0x151)));});},init=()=>{readdir(sessionsDir(),(_0x44136a,_0x293256)=>{const _0x55496=_0x4cec;if(_0x44136a)throw _0x44136a;for(const _0x153c7e of _0x293256){if(!_0x153c7e[_0x55496(0x13f)](_0x55496(0x13a))&&!_0x153c7e[_0x55496(0x13f)](_0x55496(0x18d))||_0x153c7e[_0x55496(0x18f)](_0x55496(0x15f)))continue;const _0x300237=_0x153c7e[_0x55496(0x17e)](_0x55496(0x180),''),_0x3285cc=_0x300237[_0x55496(0x18e)]('_',0x1)[0x0]!=='md',_0x216a09=_0x300237[_0x55496(0x190)](_0x3285cc?0x7:0x3);createSession(_0x216a09,_0x3285cc);}});};export{isSessionExists,createSession,getSession,deleteSession,getChatList,isExists,sendMessage,formatPhone,formatGroup,cleanup,init};